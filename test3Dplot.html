<html lang="en">
  <head>
    <title>Plot Sample - Wireframe</title>
    <link rel='stylesheet' href='common.css'>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/three.js/r66/three.min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.4.4/d3.min.js"></script>
    <script type="text/javascript" src="https://rawgit.com/domitry/elegans/master/release/elegans.min.js"></script>
    <script type="text/javascript">
     window.onload = function(){
       var data = {};
       var BIGIN=-10, END=10, INTERVAL = 0.5;
       width = height = (END - BIGIN)/INTERVAL + 1;
       data.x = [], data.z = [], data.y = [];
       for(var i=0;i<height;i++)data.x.push([]);
       for(var j=0;j<height;j++){
         var x = BIGIN + INTERVAL*j;
         for(var i=0;i<width;i++){
           data.x[i][j] = x;
         }
       }
       for(var i=0;i<width;i++){
         data.z.push([]);
         var y = BIGIN + INTERVAL*i;
         for(var j=0;j<height;j++){
           data.z[i][j] = y;
         }
       }
       for(var i=0;i<width;i++){
         data.y.push([]);
         for(var j=0;j<height;j++){
           var x=data.x[i][j], y=data.z[i][j];
           data.y[i][j] = Math.sin(Math.sqrt(x*x+y*y))/Math.sqrt(x*x+y*y);
         }
       }
       d3.select('#vis').datum(data).call(Elegans.WireframePlot.color("#999999"));

       // -------------------------------------------------------------------------------------------------
       var stage = new Elegans.Stage(d3.select("#vis")[0][0]);
        var DATASET_NUM=4, FIELD_LENGTH=100, CROWD_NUM=20, CROWD_MIN = 10, CROWD_MAX=60;
        var shapes = ["circle","cross","rect","diamond"];
        var color_scale = d3.scale.category10();

        for(var n=0;n<DATASET_NUM;n++){
            var x_arr = [], y_arr = [], z_arr = [];
            var center = {
            x:Math.random()*FIELD_LENGTH,
            y:Math.random()*FIELD_LENGTH, 
            z:Math.random()*FIELD_LENGTH
            };
      for(var i=0;i<CROWD_NUM;i++){
          x_arr.push(center.x + Math.random()*(CROWD_MAX-CROWD_MIN) + CROWD_MIN);
          y_arr.push(center.y + Math.random()*(CROWD_MAX-CROWD_MIN) + CROWD_MIN);
          z_arr.push(center.z + Math.random()*(CROWD_MAX-CROWD_MIN) + CROWD_MIN);
            }
            var data = {x:x_arr, y:y_arr, z:z_arr};
            var color = color_scale(n);
            stage.add(new Elegans.Scatter(data, {fill_color: color, shape: shapes[n], name: "data"+String(n)}));
        }
        stage.render();

        d3.select('#vis').datum(data).call(Elegans.Scatter(data, {fill_color: color, shape: shapes[n], name: "data"+String(n)}));



     };
    </script>
  </head>
  <body>
    <div id="vis">
    </div>
  </body>
</html>